

# ğŸ§° BACKUP DE `/root` â†’ GOOGLE DRIVE (con rclone)

## ğŸ¥‡ PASO 1 â€” Instalar rclone

En la instancia:

```bash
apt update
apt install -y rclone
```

Comprueba:

```bash
rclone version
```

---

## ğŸ¥ˆ PASO 2 â€” Configurar Google Drive (una sola vez)

Ejecuta:

```bash
rclone config
```

Sigue exactamente este flujo:

1. `n` â†’ new remote
2. Nombre: `gdrive`
3. Tipo: **drive**
4. Client ID â†’ ENTER
5. Client Secret â†’ ENTER
6. Scope â†’ `1` (full access)
7. Advanced config â†’ `n`
8. Use auto config â†’ `y`

ğŸ‘‰ Se abrirÃ¡ una URL
ğŸ‘‰ Inicia sesiÃ³n en tu Google
ğŸ‘‰ Copia el cÃ³digo
ğŸ‘‰ PÃ©galo en la terminal

Cuando termine:

```bash
q
```

---

## ğŸ¥‰ PASO 3 â€” Crear el backup comprimido

```bash
tar --zstd \
  --exclude=/root/.cache \
  -cvf /root/backup-root-$(date +%F).tar.zst \
  /root
```

---

## ğŸš€ PASO 4 â€” Subir a Google Drive

```bash
rclone copy /root/backup-root-*.tar.zst gdrive:vast-backups
```

ğŸ“ Se crea la carpeta `vast-backups` en tu Drive.

Verifica:

```bash
rclone ls gdrive:vast-backups
```

---

# â™»ï¸ RESTAURAR DESDE GOOGLE DRIVE

## ğŸ¥‡ Descargar backup

```bash
rclone copy gdrive:vast-backups/backup-root-2026-01-29.tar.zst /root
```

---

## ğŸ¥ˆ Restaurar

âš ï¸ Esto sobrescribe `/root`.

```bash
tar --zstd -xvf /root/backup-root-2026-01-29.tar.zst -C /
```

Cierra sesiÃ³n o reinicia.

---

# ğŸ”¥ OPCIONAL â€” Script 1-click (muy recomendado)

Crea `/root/backup_to_drive.sh`:

```bash
#!/bin/bash
set -e

DATE=$(date +%F)
BACKUP="/root/backup-root-$DATE.tar.zst"

tar --zstd \
  --exclude=/root/.cache \
  -cf $BACKUP /root

rclone copy $BACKUP gdrive:vast-backups
rm $BACKUP

echo "âœ… Backup completado y subido a Google Drive"
```

Hazlo ejecutable:

```bash
chmod +x /root/backup_to_drive.sh
```

Ejecutar:

```bash
./backup_to_drive.sh
```

---

# ğŸ§  Buenas prÃ¡cticas

* Haz backup **antes de apagar la instancia**
* MantÃ©n **2â€“3 backups** en Drive
* No subas `.cache` ni `.Trash`
* Drive aguanta bien archivos grandes

